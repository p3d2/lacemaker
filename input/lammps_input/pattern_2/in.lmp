# LAMMPS Input Script

# Initialization
units           lj
atom_style      molecular
boundary        m m m  # Non-periodic boundary conditions in all directions

bond_style      harmonic
angle_style 	harmonic

# Atom Definition
variable filename string "pattern2_v2_0.25_3.0_2.5_30.0_50.0"
read_data       output/lammps_data/${filename}.data

# Force Field Settings
pair_style soft 1.0
pair_coeff * * 200.0
comm_modify cutoff 4.1

# Dump command to output atom positions to a file
compute			perAtomPE all pe/atom
dump myDump all custom 10000 output/simulations/${filename}.lammpstrj id type x y z fx fy fz c_perAtomPE

# Fixes
#region left_block block INF 0.75 INF INF INF INF units box
#region right_block block 149.25 INF INF INF INF INF units box
#region bottom_block block INF INF INF 150.75 INF INF units box
#region top_block block INF INF 299.25 INF INF INF units box

region left_block block INF -168.75 INF INF INF INF units box
region right_block block -20.25 INF INF INF INF INF units box
region bottom_block block INF INF INF 563.25 INF INF units box
region top_block block INF INF 711.55 INF INF INF units box

group left_wall region left_block
group right_wall region right_block
group bottom_wall region bottom_block
group top_wall region top_block
group boundary union left_wall right_wall bottom_wall top_wall

fix freezef boundary setforce 0.0 0.0 0.0
fix dragU all viscous 0.1
fix nve_all all nve

# Minimization to relax initial configuration
minimize 1.0e-6 1.0e-7 10000 100000

neigh_modify exclude molecule/intra all
neigh_modify every 100

# Integrator Settings
timestep        0.001
thermo          10000
thermo_style    custom step temp pe ke etotal

# Run

run 100000

write_restart output/simulations/sim1.restart